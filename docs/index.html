<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tsLogger: tsLogger: Timeseries and Snapshot Logger</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">tsLogger
   </div>
   <div id="projectbrief">A C++17 data logger for timeseries and snapshot data</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title"><a class="el" href="classts_logger.html" title="The core class of the library is the tsLogger class. Multiple simultaneous class objects are supporte...">tsLogger</a>: Timeseries and Snapshot Logger </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a><a class="el" href="classts_logger.html" title="The core class of the library is the tsLogger class. Multiple simultaneous class objects are supporte...">tsLogger</a> (short for Timeseries and Snapshot Logger) is a <b>C++17</b> data logger for time series data that is dead-simple to use. It can also be used to save a snapshot the state of most variables to a file at any time during runtime.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Features, requirements and limitations</h1>
<ul>
<li>This is a C++17 library which utilizes <code>std::variant</code> vectors of pointers to data that needs to be tracked. So, all you need to log a variable its address. But, you will need a C++17 compatible compiler. The library has been tested to work on Visual Studio 2022 running on Windows 10.</li>
<li>You can get started with logging in as few as one class object initialization followed by two function calls.</li>
<li>Supports logging <code>int, unsigned int, long, unsigned long, long long, unsigned long long, float, double, char, unsigned char, and bool</code> datatypes as a CSV file (I am working on binary file support).</li>
<li>Users can optionally name the variables they are tracking too. Otherwise, a default name (variable number being tracked: <em>0~n-1</em>) is assigned.</li>
<li>The user can optionally add either/both a preamble or/and a CSV header to the log file.<ul>
<li>The CSV header contains the aforementioned variable names.</li>
<li>The first line of the preamble contains the total number of lines the preamble and header take together in the text file along with the UNIX time stamp when the library was initialized&mdash;separated by a comma.</li>
<li>Users can append lines of text to the preamble as they see it&mdash;I use it to store calibration data pertinent to the experiment that I am running.</li>
<li>The preamble must be added first, before the header and both need to be added to the file before logging begins to allows for easy ingestion of CSV data to post-processing software like Python or MATLAB. This is also why the very first line contains the number of lines to ignore before reading CSV data.</li>
</ul>
</li>
<li>This library is not thread-safe. This is something I want to investigate, but don't know if my architecture will allow it.</li>
</ul>
<h1><a class="anchor" id="autotoc_md2"></a>
Prerequisites, usage and DOCUMENTATION</h1>
<p>The only prerequisite to use this library is a C++17 compatible compiler. I've tested it to work on Windows, but it may need some tweaks to get it up and running on Linux/Mac.</p>
<p>The header file <code><a class="el" href="ts_logger_8h.html">tsLogger.h</a></code> is located in the <code>./include</code> directory. You can either use the precompiled <em>win32</em> static library (Win32) in <code>./bin</code> or compile it yourself using the only source file located at <code>./src/tsLogger.cpp</code> if you're on a different platform or even if you just want to.</p>
<p>I will make DOXYGEN-generated documentation available as soon as I have a minute to comment the files and build the documentation. In the mean time, here is a list of the functions in the order that I would use them in my code:</p><ul>
<li>Initialize a logger using <code><a class="el" href="classts_logger.html" title="The core class of the library is the tsLogger class. Multiple simultaneous class objects are supporte...">tsLogger</a> aLogger("PATH//FILE_NAME.csv")</code> if you have a file path in mind or <code><a class="el" href="classts_logger.html" title="The core class of the library is the tsLogger class. Multiple simultaneous class objects are supporte...">tsLogger</a> aLogger()</code> if you want to generate a new file automatically. The default file path is defined as <code>C:\\data</code> for the moment. You can use the member function <code>getFilePath()</code> to see where the file is located.</li>
<li>If you want to append line(s) to a preamble, use <code>appendToPreamble("&lt;SOME TEXT HERE&gt;")</code>. You can do this as many times as you need. Note that any new line characters will be replaced by spaces by this call.</li>
<li><code>addPreamble()</code> adds the preamble to file. This includes a first line containing the total number of lines the preamble and header take together in the text file along with the UNIX time stamp when the library was initialized&mdash;separated by a comma. You can call this function only once and only before either adding the CSV header or starting to log data.</li>
<li>Use the call <code>trackDataPoint(&lt;pointer/address to datapoint&gt;, "&lt;OPTIONAL DATA NAME&gt;")</code> to track a datapoint for logging. You must pass a pointer/address to said datapoint. Optionally, you may also pass a data name. If an empty string passed, <a class="el" href="classts_logger.html" title="The core class of the library is the tsLogger class. Multiple simultaneous class objects are supporte...">tsLogger</a> will auto-assign a name. You may track as many variables as you want. The supported types of data points are <code>int, unsigned int, long, unsigned long, long long, unsigned long long, float, double, char, unsigned char, and bool</code>.</li>
<li><code>addDataHeader()</code> uses the names of the datapoints being tracked to append a CSV header into the text file. You can do this only once, and only before logging starts. If you have already added the preamble beforehand, it will modify the first line to indicate the extra line of headers before the CSV data begins.</li>
<li>Whenever you need to log the state of all the tracked variables, simply call <code>logData()</code> to store the state of all of the variables as a line in your file.</li>
<li>The first time you call this function (or manually if the user prefers), it calls <code>startLogger()</code> to indicate that loggging has started. This prevents the addition of preamble lines or a data header between the actual data as such a thing would corrupt the CSV data during ingestion.</li>
</ul>
<p>In <code>./tsLogger_example/main.cpp</code> (linked here), you can find an example to get you started and its output is in <code>./tsLogger_example/testFile.csv</code>.</p>
<p>Doxygen-generated HTML documentation is available here.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Inspiration and learnings</h1>
<p>As someone working on neuro-robotics, and near-real-time data acquisition and controls, I need to work on high performance code. This means, I usually work with C/C++. I needed to track dozens of datapoints that were being updated simultaneously every <em>1 ms</em> with minimal performance penalty. The simple _"Let's put an `fprintf` outputing CSV lines to a file in the control loop"_ approach worked great until I started making PEBCAK errors like incorrect format specifiers or mistakes passing all datapoints to the right thread and function. I wanted a fool-proof way to collect this streaming real-time data so long as the performance penalty was not crushing. So, I created this library. Along the way, I learning about some of the new features that modern has to offer to offer like <code>std::variant</code>, <code>std::vector</code>, template functions and classes, and even lambdas.</p>
<p>I am now investigating replacing <code>std::visit</code> when resolving <code>std::variant</code> with <code>std::get_if</code> or my own implementation as I learned that <code>std::visit</code> is potentially slow <a href="https://www.reddit.com/r/cpp/comments/kst2pu/with_stdvariant_you_choose_either_performance_or/">[1]</a>, <a href="https://www.reddit.com/r/cpp/comments/a8xkl3/when_performance_guarantees_hurts_performance/">[2]</a>, <a href="https://bitbashing.io/std-visit.html">[3]</a>.</p>
<h1><a class="anchor" id="autotoc_md4"></a>
LICENSE</h1>
<p>This library is released under the GNU Lesser GPL V3 license.</p>
<h1><a class="anchor" id="autotoc_md5"></a>
Feedback, issues and pull requests</h1>
<p>Please don't hesitate to leave your feedback by opening up an issue. I welcome pull requests too for interesting features so long as the library remains dead-simple to use. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
